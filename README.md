# ArduJTAG Toolbox: Your JTAG Swiss Knife

## About

The initial version of this branch was built for personal research and while working on various projects.

## TODO:

- Add command: Set/Get JTAG speed
- Add support of https://github.com/cyphunk/JTAGenum
- Arduino pins and JTAG pins assigment
- Add support of https://github.com/szymonh/JTAGscan
- Add support of `bool verifyIdCode(uint32_t id_code)` from https://github.com/szymonh/JTAGscan
- https://github.com/viveris/jtag-boundary-scanner
- https://github.com/colinoflynn/pyjtagbs
- https://github.com/viveris/jtag-boundary-scanner
- https://github.com/balau/JTAGduino


## Naming

- arduJtagToolBox
- pyJtagBox
- JtagSwissKnife - JSK
- ArduJTAG Toolbox
- ArduJTAG Swiss Knife
- JTAG Swiss Knife: ArduJTAG Toolbox Edition / JTAG Swiss Knife: Python CLI Toolbox Edition
- ArduJTAG Toolbox: Your JTAG Swiss Knife Companion
- ArduJTAG Maestro
- ArguJTAG Surgeon


## Pinout

|  Color | JTAG  | MCU  |
|---|---|---|
| фиолетовый  | VCC (3V3)  | -  |
| зеленный  | TDI  | PA15  |
| оранжевый  | TMS  | PA13  |
| серый  | TCK  | PA14  |
| синий  | TDO  | PB3  |
| белый  | RST  | -  |
| черный  | GND  | GND  |


## Examples

## Примеры работы с регистрами Debug Port

### Read of `IDCODE` `DP`register

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 000000000000000000000000000000001 | 10
TDI: 000000 | 0000 | 011111111 | 00 | 000 | 000000000000000000000000000000000 | 00
TMO: 000000 | 0001 | 000100000 | 00 | 001 | 110111000100000000001011101001000 | 00
```

```shell
reset
ir -code "011111111"
dr -data "000000000000000000000000000000000"
```

```shell
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py reset --port COM11
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py ir --port COM11 --code 011111111
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py dr --port COM11 --data 110111000100000000001011101001000
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py sequence --port COM11 --ir 011111111 --dr 110111000100000000001011101001000

C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py reset --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py ir 011111111 --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py dr 000000000000000000000000000000000 --port COM8
```

### Write to `CTRL/STAT` `DP` register

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 10 00000100000000000000000000001010 0 | 00
TDO: 000000 | 0001 | 000100000 | 00 | 000 | 1 00 00000000000000000000000000000000 0 | 00
```

```shell
reset
ir -code "010111111"
dr -data "010000001000000000000000000000010100"
```

```shell
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py reset --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py ir 010111111 --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py dr 010000001000000000000000000000010100 --port COM8
```

### Read of `CTRL/STAT` `DP` register

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 1 10 00000000000000000000000000000000 0 | 00
TDO: 000000 | 0001 | 000100000 | 00 | 000 | 1 00 00000000000000000000000000011110 0 | 00

TMS: 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000 | 0 00 00000000000000000000000000000000 0 | 00
TDO: 000 | 1 00 00000000000000000000000000011110 0 | 00
```

```shell
reset
ir -code "010111111"
dr -data "110000000000000000000000000000000000"
```

```shell
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py reset --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py ir 010111111 --port COM8
C:/Users/User/AppData/Local/Programs/Python/Python310/python.exe .\source\jtag.py dr 110000000000000000000000000000000000 --port COM8
```

### Чтение IDR регистра MEM-AP

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 01 00001111000000000000000000000000 0 | 00
TDO: 000000 | 0001 | 000100000 | 00 | 000 | 1 00 00000000000000000000000000000000 0 | 00


TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 1 11 00000000000000000000000000000000 0 | 00
TDO: 000000 | 0001 | 000100000 | 00 | 000 | 1 00 00011110000000000000000000000000 0 | 00

TMS: 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000 | 0 00 00000000000000000000000000000000 0 | 00
TDO: 000 | 1 01 00010000000000011101110001001000 0 | 00
```

```shell
reset
ir -code "010111111"
dr -data "001000011110000000000000000000000000"

reset
ir -code "110111111"
dr -data "111000000000000000000000000000000000"

dr -data "000000000000000000000000000000000000"
```

### Write of 0xAA55AA55 in to 0x20000000 memory address:

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 01 00000000000000000000000000000000 0 | 00
TDO: 000000   0001   000100000   00   000   1 00 00000000000000000000000000000000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 00 01000000000000000000000000000000 0 | 00
TDO: 000000   0001   000100000   00   000   1 00 00000000000000000000000000000000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 10 00000000000000000000000000000100 0 | 00
TDO: 000000   0001   000100000   00   000   1 01 00010000000000011101110001001000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 11 10101010010101011010101001010101 0 | 00
TDO: 000000   0001   000100000   00   000   1 01 00010000000000011101110001001000 0   00
```

```shell
reset
ir -code "010111111"
dr -data "001000000000000000000000000000000000"

reset
ir -code "110111111"
dr -data "000010000000000000000000000000000000"

reset
ir -code "110111111"
dr -data "010000000000000000000000000000001000"

reset
ir -code "110111111"
dr -data "011101010100101010110101010010101010"
```

### Read of memory  0x08000000 address:

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 01 00000000000000000000000000000000 0 | 00
TDO: 000000   0001   000100000   00   000   1 00 00000000000000000000000000000000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 00 01000100000000000000000011000101 0 | 00
TDO: 000000   0001   000100000   00   000   1 00 00000000000000000000000000000000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 10 00000000000000000000000000000100 0 | 00
TDO: 000000   0001   000100000   00   000   1 01 00010000000000011101110001001000 0   00

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 1 11 00000000000000000000000000000000 0 | 00
TDO: 000000   0001   000100000   00   000   1 01 00010000000000011101110001001000 0   00

TMS: 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000 | 0 00 00000000000000000000000000000000 0 | 00
TDO: 000   1 0 10101010010101011010101001010101 0 0   00
```

```shell
reset
ir -code "010111111"
dr -data "001000000000000000000000000000000000"

reset
ir -code "110111111"
dr -data "000010001000000000000000000110001010"

reset
ir -code "110111111"
dr -data "010000000000000000000000000000001000"

reset
ir -code "110111111"
dr -data "111000000000000000000000000000000000"

dr -data "000000000000000000000000000000000000"
```

### CPU halt:

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 01 00000000000000000000000000000000 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 00 01000000000000000000000000000000 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 10 00001111101101110000000000000111 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 11 10000000000000001111101000000101 0 | 00
TDO: 000000   0001   000100000   00   000   1 00 00000000000000000000000000000000 0   00
```

###  DHCSR read:

```shell
TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 010111111 | 00 | 000 | 0 01 00000000000000000000000000000000 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 00 01000000000000000000000000000000 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 0 10 00001111101101110000000000000111 0 | 00
TDO:

TMS: 111110 | 1100 | 000000001 | 10 | 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000000 | 0000 | 110111111 | 00 | 000 | 1 11 00000000000000000000000000000000 0 | 00
TDO:

TMS: 100 | 0 00 00000000000000000000000000000000 1 | 10
TDI: 000 | 0 00 00000000000000000000000000000000 0 | 00
TDO:
```

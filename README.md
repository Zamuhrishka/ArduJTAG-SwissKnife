![Build with PlatformIO](https://img.shields.io/badge/build%20with-PlatformIO-orange?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZD0iTTEyOCAwQzkzLjgxIDAgNjEuNjY2IDEzLjMxNCAzNy40OSAzNy40OSAxMy4zMTQgNjEuNjY2IDAgOTMuODEgMCAxMjhjMCAzNC4xOSAxMy4zMTQgNjYuMzM0IDM3LjQ5IDkwLjUxQzYxLjY2NiAyNDIuNjg2IDkzLjgxIDI1NiAxMjggMjU2YzM0LjE5IDAgNjYuMzM0LTEzLjMxNCA5MC41MS0zNy40OUMyNDIuNjg2IDE5NC4zMzQgMjU2IDE2Mi4xOSAyNTYgMTI4YzAtMzQuMTktMTMuMzE0LTY2LjMzNC0zNy40OS05MC41MUMxOTQuMzM0IDEzLjMxNCAxNjIuMTkgMCAxMjggMCIgZmlsbD0iI0ZGN0YwMCIvPjxwYXRoIGQ9Ik0yNDkuMzg2IDEyOGMwIDY3LjA0LTU0LjM0NyAxMjEuMzg2LTEyMS4zODYgMTIxLjM4NkM2MC45NiAyNDkuMzg2IDYuNjEzIDE5NS4wNCA2LjYxMyAxMjggNi42MTMgNjAuOTYgNjAuOTYgNi42MTQgMTI4IDYuNjE0YzY3LjA0IDAgMTIxLjM4NiA1NC4zNDYgMTIxLjM4NiAxMjEuMzg2IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE2MC44NjkgNzQuMDYybDUuMTQ1LTE4LjUzN2M1LjI2NC0uNDcgOS4zOTItNC44ODYgOS4zOTItMTAuMjczIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzJzLTEwLjMyIDQuNjItMTAuMzIgMTAuMzJjMCAzLjc1NSAyLjAxMyA3LjAzIDUuMDEgOC44MzdsLTUuMDUgMTguMTk1Yy0xNC40MzctMy42Ny0yNi42MjUtMy4zOS0yNi42MjUtMy4zOWwtMi4yNTggMS4wMXYxNDAuODcybDIuMjU4Ljc1M2MxMy42MTQgMCA3My4xNzctNDEuMTMzIDczLjMyMy04NS4yNyAwLTMxLjYyNC0yMS4wMjMtNDUuODI1LTQwLjU1NS01Mi4xOTd6TTE0Ni41MyAxNjQuOGMtMTEuNjE3LTE4LjU1Ny02LjcwNi02MS43NTEgMjMuNjQzLTY3LjkyNSA4LjMyLTEuMzMzIDE4LjUwOSA0LjEzNCAyMS41MSAxNi4yNzkgNy41ODIgMjUuNzY2LTM3LjAxNSA2MS44NDUtNDUuMTUzIDUxLjY0NnptMTguMjE2LTM5Ljc1MmE5LjM5OSA5LjM5OSAwIDAgMC05LjM5OSA5LjM5OSA5LjM5OSA5LjM5OSAwIDAgMCA5LjQgOS4zOTkgOS4zOTkgOS4zOTkgMCAwIDAgOS4zOTgtOS40IDkuMzk5IDkuMzk5IDAgMCAwLTkuMzk5LTkuMzk4em0yLjgxIDguNjcyYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDkgMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OXoiIGZpbGw9IiNFNTcyMDAiLz48cGF0aCBkPSJNMTAxLjM3MSA3Mi43MDlsLTUuMDIzLTE4LjkwMWMyLjg3NC0xLjgzMiA0Ljc4Ni01LjA0IDQuNzg2LTguNzAxIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzItNS42OTkgMC0xMC4zMTkgNC42Mi0xMC4zMTkgMTAuMzIgMCA1LjY4MiA0LjU5MiAxMC4yODkgMTAuMjY3IDEwLjMxN0w5NS44IDc0LjM3OGMtMTkuNjA5IDYuNTEtNDAuODg1IDIwLjc0Mi00MC44ODUgNTEuODguNDM2IDQ1LjAxIDU5LjU3MiA4NS4yNjcgNzMuMTg2IDg1LjI2N1Y2OC44OTJzLTEyLjI1Mi0uMDYyLTI2LjcyOSAzLjgxN3ptMTAuMzk1IDkyLjA5Yy04LjEzOCAxMC4yLTUyLjczNS0yNS44OC00NS4xNTQtNTEuNjQ1IDMuMDAyLTEyLjE0NSAxMy4xOS0xNy42MTIgMjEuNTExLTE2LjI4IDMwLjM1IDYuMTc1IDM1LjI2IDQ5LjM2OSAyMy42NDMgNjcuOTI2em0tMTguODItMzkuNDZhOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTkgOS4zOTggOS4zOTkgOS4zOTkgMCAwIDAgOS40IDkuNCA5LjM5OSA5LjM5OSAwIDAgMCA5LjM5OC05LjQgOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTktOS4zOTl6bS0yLjgxIDguNjcxYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDggMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OHoiIGZpbGw9IiNGRjdGMDAiLz48L3N2Zz4=)

# ArduJTAG Toolbox: Your small JTAG Swiss Knife

This is an attempt to make an Arduino-based JTAG research tool.

> WARNING: The project is still under development.

## Pinout

So far in this version the pinout of JTAG signals is tightly bound to the Arduino pins. Future versions are planned to add dynamic change of pinout.

| JTAG  | Arduino  |
|---|---|
| TCK  | 2  |
| TMS  | 3  |
| TDI  | 4  |
| TDO  | 5  |
| RST  | 6 |
| GND  | GND  |


## CLI

The sketch supports the CLI interface and the following commands are currently available.

### help

Show available commands list.

Example:

```shell
help
> Commands:
  reset             Reset the JTAG TAP. No options required.
  ir [X] -len [Y]  Write to the IR register of TAP.
                    -ir X: IR instruction in hex (e.g., 1FE).
                    -len Y: Length of the instruction in bits.
  dr [X] -len [Y]  Write to the DR register of TAP.
                    -dr X: Data for DR in hex (e.g., 1A2B).
                    -len Y: Length of the data in bits.
  clock -tms [X] -tdi [Y]  Write value for TMS and TDI wires.
                    -tms X: Bit value for TMS.
                    -tdi Y: Bit value for TDI.
  sequence -tms [X] -tdi [Y] -len [Z] Write sequence of bits.
                    -tms X: Bits value for TMS in hex (e.g., 1A2B).
                    -tdi Y: Bits value for TDI in hex (e.g., 1A2B).
                    -len Y: Number of the batch of bits.
```

### version

Show current firmware version.

Example

```shell
version
> Firmware version: DEV-be5616f-24_01_07
```

### reset

Reset the JTAG TAP. No options required.

Example:

```shell
reset
> Reset
```

### ir

Write to the IR register of TAP. This command require 2 additional arguments:

- code X: IR instruction in hex (e.g., 1FE).
- len Y: Length of the instruction in bits.

Example:

```shell
ir -code 1FE -len 9
> IR written
```

### dr

Write to the DR register of TAP. This command require 2 additional arguments:

- data X: Data for DR in hex (e.g., 0200008002).
- len Y: Length of the data in bits.

Example:

```shell
dr -data 0200008002 -len 36
> 02 00 00 80 03
```

### sequence

Write sequence of bits. This command require 3 additional arguments:

- tms X: Bits value for TMS in hex (e.g., 1A2B).
- tdi Y: Bits value for TDI in hex (e.g., 1A2B).
- len Y: Number of the batch of bits.

Example:

```shell
sequence -tms 06600100000018 -tdi C03F0000000000 -len 54
> 01 00 16 80 03 07 02
```


## TODO:

- Add command: Set/Get JTAG speed
- Arduino pins and JTAG pins assigment
- https://github.com/szymonh/JTAGscan
- https://github.com/cyphunk/JTAGenum
- https://github.com/colinoflynn/pyjtagbs
- https://github.com/viveris/jtag-boundary-scanner
